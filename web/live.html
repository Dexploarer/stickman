<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agent Live Observer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-0: #090e15;
        --bg-1: #111a27;
        --panel: rgba(12, 24, 38, 0.84);
        --line: rgba(152, 193, 235, 0.32);
        --line-strong: rgba(152, 193, 235, 0.56);
        --text: #e8f3ff;
        --muted: #9cb0c9;
        --ok: #42d89e;
        --warn: #ffd576;
        --bad: #ff7081;
        --accent: #5fd1ff;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        min-height: 100%;
      }

      body {
        font-family: "Space Grotesk", sans-serif;
        color: var(--text);
        background:
          radial-gradient(circle at 15% 10%, rgba(95, 209, 255, 0.16), transparent 42%),
          radial-gradient(circle at 85% 10%, rgba(255, 143, 94, 0.14), transparent 38%),
          linear-gradient(160deg, var(--bg-0), var(--bg-1));
      }

      .wrap {
        padding: 12px;
        display: grid;
        gap: 10px;
      }

      .status {
        border: 1px solid var(--line);
        border-radius: 12px;
        background: var(--panel);
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
        font-size: 0.8rem;
      }

      .status > div:first-child {
        display: flex;
        align-items: center;
      }

      .filter {
        font-size: 0.72rem;
        color: var(--muted);
        margin-top: 2px;
      }

      .dot {
        width: 9px;
        height: 9px;
        border-radius: 999px;
        background: var(--warn);
        margin-right: 8px;
        box-shadow: 0 0 0 6px rgba(255, 213, 118, 0.12);
      }

      .online .dot {
        background: var(--ok);
        box-shadow: 0 0 0 6px rgba(66, 216, 158, 0.16);
      }

      .actions {
        display: flex;
        gap: 8px;
      }

      button {
        border: 1px solid var(--line-strong);
        background: rgba(12, 24, 38, 0.9);
        color: var(--text);
        border-radius: 999px;
        padding: 7px 12px;
        cursor: pointer;
        font: inherit;
        font-size: 0.76rem;
        transition: filter 130ms ease, transform 130ms ease;
      }

      button:hover {
        filter: brightness(1.08);
        transform: translateY(-1px);
      }

      .frame-view {
        border: 1px solid var(--line);
        border-radius: 14px;
        background: rgba(5, 12, 20, 0.9);
        min-height: 250px;
        max-height: 420px;
        display: grid;
        place-items: center;
        overflow: hidden;
      }

      .frame-view img {
        width: 100%;
        height: auto;
        display: block;
      }

      .stream {
        border: 1px solid var(--line);
        border-radius: 14px;
        background: rgba(8, 16, 27, 0.86);
        max-height: 360px;
        overflow: auto;
        padding: 8px;
        display: grid;
        gap: 8px;
      }

      .event {
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 8px;
        background: rgba(7, 14, 24, 0.84);
        display: grid;
        gap: 6px;
      }

      .event-head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.72rem;
      }

      .event-type {
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .event-time {
        color: var(--muted);
      }

      .event-body {
        white-space: pre-wrap;
        word-break: break-word;
        font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
        font-size: 0.72rem;
        color: rgba(214, 231, 250, 0.9);
        line-height: 1.42;
      }
    </style>
  </head>
  <body>
    <main class="wrap">
      <section id="live-status" class="status">
        <div><span class="dot"></span><span id="live-connection">Connecting...</span></div>
        <div id="live-count">0 events</div>
      </section>
      <div id="live-filter" class="filter">Filter: all watch sessions</div>
      <section class="actions">
        <button id="live-clear" type="button">Clear</button>
        <button id="live-reconnect" type="button">Reconnect</button>
      </section>
      <section class="frame-view">
        <img id="live-frame" alt="Watch frame" />
      </section>
      <section id="live-stream" class="stream"></section>
    </main>
    <script type="module" src="/live.js"></script>
  </body>
</html>
