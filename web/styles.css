:root {
  --font-ui: "Anek Latin", "Manrope", "Segoe UI", sans-serif;
  --font-mono: "JetBrains Mono", "SFMono-Regular", monospace;
  --bg-app: #0a0a0d;
  --bg-top: #15161a;
  --bg-nav: #14151a;
  --bg-left: #17181e;
  --bg-center: #111218;
  --bg-right: #15161b;
  --bg-bottom: #0f1015;
  --bg-panel: #17191f;
  --bg-panel-soft: #121319;
  --line-subtle: #242733;
  --line-strong: #2f3445;
  --text-main: #eceff7;
  --text-muted: #a0a7ba;
  --text-dim: #7b8295;
  --accent: #1698ea;
  --accent-soft: rgba(22, 152, 234, 0.16);
  --ok: #24c58c;
  --warn: #ffb24c;
  --err: #ff6a73;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --shadow-soft: 0 20px 40px rgba(0, 0, 0, 0.32);
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  width: 100%;
  height: 100%;
}

body {
  font-family: var(--font-ui);
  color: var(--text-main);
  background:
    radial-gradient(1200px 540px at 14% -20%, rgba(20, 159, 255, 0.1), transparent 55%),
    linear-gradient(180deg, #0a0b10, #090a0f 55%, #08090d);
}

.tw-body {
  font-family: var(--font-ui);
  color: var(--text-main);
}

main.app-shell,
main.shell {
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
}

h1,
h2,
h3,
h4,
p {
  margin: 0;
}

h1 {
  font-size: 1.2rem;
  letter-spacing: 0.02em;
}

h2 {
  font-size: 0.84rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-muted);
}

h3 {
  font-size: 0.74rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-dim);
}

small {
  color: var(--text-dim);
}

code,
pre,
kbd {
  font-family: var(--font-mono);
}

pre {
  margin: 0;
  min-height: 52px;
  border: 1px solid var(--line-subtle);
  background: #10131b;
  color: #bec8e3;
  border-radius: var(--radius-sm);
  padding: 10px;
  font-size: 0.72rem;
  line-height: 1.45;
  overflow: auto;
  white-space: pre-wrap;
  overflow-wrap: anywhere;
}

#dashboard-root table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  overflow: hidden;
  background: #10131a;
}

#dashboard-root thead th {
  text-align: left;
  font-size: 0.68rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-dim);
  background: #121724;
  border-bottom: 1px solid var(--line-subtle);
  padding: 8px 10px;
}

#dashboard-root tbody td {
  padding: 8px 10px;
  border-bottom: 1px solid rgba(47, 52, 69, 0.56);
  color: #d9e4ff;
  font-size: 0.75rem;
  vertical-align: top;
}

#dashboard-root tbody tr:last-child td {
  border-bottom: 0;
}

label {
  display: block;
  color: var(--text-dim);
  font-size: 0.68rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

input,
textarea,
select,
button {
  font: inherit;
}

input,
textarea,
select {
  width: 100%;
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #0f1118;
  color: var(--text-main);
  padding: 8px 10px;
  font-size: 0.82rem;
  transition: border-color 140ms ease, background-color 140ms ease, box-shadow 140ms ease;
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: rgba(22, 152, 234, 0.66);
  box-shadow: 0 0 0 2px rgba(22, 152, 234, 0.18);
  background: #121521;
}

textarea {
  resize: vertical;
}

button {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #11151f;
  color: var(--text-main);
  font-size: 0.74rem;
  letter-spacing: 0.04em;
  padding: 8px 12px;
  cursor: pointer;
  transition: border-color 140ms ease, background-color 140ms ease, color 140ms ease;
}

button:hover {
  border-color: rgba(22, 152, 234, 0.52);
  background: #161d2c;
}

button:disabled {
  opacity: 0.56;
  cursor: default;
}

button.ghost {
  background: transparent;
  color: var(--text-muted);
}

button.ghost:hover {
  color: #dce6ff;
  background: rgba(20, 23, 34, 0.86);
}

.hidden {
  display: none !important;
}

.stack {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.summary {
  color: var(--text-dim);
  font-size: 0.78rem;
  line-height: 1.45;
}

.chip,
.ide-pill {
  border: 1px solid var(--line-strong);
  background: #171b26;
  color: var(--text-muted);
  border-radius: 999px;
  font-size: 0.66rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 3px 9px;
}

.chips {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.ide-pill-cost {
  color: #ff596b;
  border-color: rgba(255, 98, 114, 0.7);
}

.ide-pill-running {
  color: #76f5c2;
  border-color: rgba(89, 245, 186, 0.64);
}

.button-row,
.button-grid,
.toggle-row,
.field-grid,
.arg-grid {
  display: grid;
  gap: 8px;
}

.button-row {
  grid-template-columns: repeat(auto-fit, minmax(128px, 1fr));
}

.button-grid {
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
}

.toggle-row {
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
}

.toggle-row label {
  text-transform: none;
  letter-spacing: 0.01em;
  font-size: 0.78rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

.toggle-row input[type="checkbox"] {
  width: auto;
}

.field-grid {
  grid-template-columns: minmax(120px, 150px) minmax(0, 1fr);
  align-items: center;
}

.arg-grid {
  grid-template-columns: 1fr;
}

.grid-4 {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

.history-list {
  display: grid;
  gap: 8px;
}

.history-item {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #141720;
  display: grid;
  gap: 5px;
  padding: 9px;
}

.history-item strong {
  font-size: 0.8rem;
}

.history-item code {
  color: #8ca2d3;
  font-size: 0.68rem;
}

.ambient {
  display: block;
}

.hero {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: 12px;
  align-items: center;
  padding: 14px 18px;
  border-bottom: 1px solid var(--line-subtle);
  background: linear-gradient(180deg, rgba(16, 17, 24, 0.95), rgba(12, 13, 19, 0.98));
}

.hero-content {
  display: grid;
  gap: 4px;
}

.hero-kicker {
  color: var(--text-dim);
  font-size: 0.68rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.hero-controls {
  display: grid;
  gap: 8px;
  justify-items: end;
}

.hero-status {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.hero-note {
  color: var(--text-dim);
  font-size: 0.66rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

/* Desktop drag/titlebar */

.desktop-drag-region {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 30px;
  z-index: 120;
  display: none;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  color: var(--text-dim);
  font-size: 0.72rem;
}

.desktop-drag-title {
  color: #d8e0f5;
  margin-right: 8px;
}

.desktop-drag-status {
  color: var(--text-dim);
}

body.desktop-titlebar-overlay .desktop-drag-region {
  display: flex;
}

/* Onboarding */

#onboarding-root {
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: 18px;
}

.onboarding-shell .panel {
  width: min(1280px, 100%);
  margin: 0 auto;
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-lg);
  background: rgba(16, 17, 24, 0.94);
  box-shadow: var(--shadow-soft);
  padding: 16px;
  display: grid;
  gap: 14px;
}

.onboarding-shell section {
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-sm);
  background: #12141c;
  padding: 11px;
  display: grid;
  gap: 8px;
}

body.dashboard-visible .hero,
body.dashboard-visible .ambient {
  display: none !important;
}

/* Social Agent Studio shell */

#dashboard-root.ide-shell {
  display: grid;
  grid-template-rows: 50px 54px minmax(0, 1fr) auto;
  width: 100%;
  height: 100%;
  min-height: 600px;
  min-width: 900px;
  background: var(--bg-app);
}

.dashboard-shell {
  width: 100%;
  height: 100%;
}

#dashboard-root .ide-topbar {
  grid-row: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 0 14px;
  border-bottom: 1px solid var(--line-subtle);
  background: var(--bg-top);
}

#dashboard-root .ide-topbar-left,
#dashboard-root .ide-topbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

#dashboard-root .ide-topbar-title {
  color: #ffffff;
  font-size: 0.88rem;
  letter-spacing: 0.02em;
  text-transform: none;
  white-space: nowrap;
}

#dashboard-root .ide-toolbar-btn {
  min-height: 30px;
  padding: 6px 10px;
}

.ide-icon-btn {
  min-width: 70px;
}

#dashboard-root #ide-activity-rail {
  grid-row: 2;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 0 14px;
  border-bottom: 1px solid var(--line-subtle);
  background: var(--bg-nav);
  overflow-x: auto;
}

.ide-activity-rail {
  scrollbar-width: thin;
}

.ide-nav-row {
  scrollbar-width: thin;
}

#dashboard-root .ide-activity-btn {
  border: 0;
  border-bottom: 2px solid transparent;
  border-radius: 0;
  background: transparent;
  color: var(--text-muted);
  padding: 9px 12px;
  font-size: 0.78rem;
  letter-spacing: 0.01em;
  text-transform: none;
  white-space: nowrap;
}

#dashboard-root .ide-activity-btn:hover {
  color: #dce7ff;
  background: rgba(255, 255, 255, 0.02);
}

#dashboard-root .ide-activity-btn.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
}

#dashboard-root .ide-workspace {
  grid-row: 3;
  min-height: 0;
  display: grid;
  grid-template-columns: 300px minmax(0, 1fr) 330px;
  overflow: hidden;
}

#dashboard-root #ide-left-dock,
#dashboard-root .ide-editor-surface,
#dashboard-root #dashboard-utility-rail {
  min-height: 0;
}

#dashboard-root #ide-left-dock {
  border-right: 1px solid var(--line-subtle);
  background: var(--bg-left);
  padding: 10px;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  overflow: auto;
}

.ide-left-dock,
.ide-sidebar {
  min-height: 0;
}

#dashboard-root .ide-editor-surface {
  background: var(--bg-center);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
}

.ide-editor {
  min-height: 0;
}

#dashboard-root .ide-view-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--line-subtle);
  background: #13161d;
}

#dashboard-root #ide-view-title {
  font-size: 0.9rem;
  letter-spacing: 0.03em;
  color: #f4f7ff;
}

#dashboard-root #ide-view-subtitle {
  margin-top: 4px;
  color: var(--text-dim);
  font-size: 0.72rem;
}

#dashboard-root .ide-view-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

#dashboard-root #ide-main-dock {
  overflow: auto;
  padding: 10px;
}

.ide-main-dock,
.ide-dock {
  min-height: 0;
}

#dashboard-root #dashboard-utility-rail {
  border-left: 1px solid var(--line-subtle);
  background: var(--bg-right);
  padding: 10px;
  display: grid;
  align-content: start;
  gap: 10px;
  overflow: auto;
}

.ide-inspector {
  min-height: 0;
}

#dashboard-root .utility-rail-head,
#dashboard-root .ide-bottom-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

#dashboard-root #ide-center-tabs {
  display: none !important;
}

#dashboard-root #ide-left-tabs,
#dashboard-root #ide-main-tabs,
#dashboard-root .ide-tabbar {
  display: flex;
  gap: 6px;
  padding: 0 0 10px;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--line-subtle);
  overflow-x: auto;
}

#dashboard-root #ide-main-tabs {
  display: none !important;
}

.ide-main-tabbar {
  display: none !important;
}

#dashboard-root .ide-tab {
  border: 1px solid transparent;
  border-radius: 999px;
  color: var(--text-muted);
  background: transparent;
  padding: 6px 10px;
  font-size: 0.7rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

#dashboard-root .ide-tab:hover {
  border-color: var(--line-strong);
  color: var(--text-main);
}

#dashboard-root .ide-tab-active {
  border-color: rgba(22, 152, 234, 0.62);
  color: #f3f8ff;
  background: rgba(22, 152, 234, 0.14);
}

#dashboard-root [data-ide-pane] {
  display: none;
}

#dashboard-root .ide-pane-active {
  display: grid;
}

#dashboard-root .panel {
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-md);
  background: linear-gradient(180deg, #171a22, #13161d);
  padding: 12px;
  display: grid;
  gap: 10px;
}

#dashboard-root .panel.split {
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  align-items: start;
}

#dashboard-root .panel.split > section {
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-sm);
  background: var(--bg-panel-soft);
  padding: 10px;
  display: grid;
  gap: 8px;
  min-height: 100%;
}

#dashboard-root .sub-panel,
#dashboard-root .utility-section,
#dashboard-root .ide-inspector-module,
#dashboard-root .ide-bottom-module {
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-sm);
  background: #12141b;
  padding: 10px;
  display: grid;
  gap: 8px;
}

#dashboard-root .integration-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

#dashboard-root .integration-badges .chip {
  background: #101827;
}

#dashboard-root .integration-badge {
  border: 1px solid var(--line-subtle);
  border-radius: 999px;
  background: #111826;
  color: var(--text-muted);
  padding: 3px 9px;
  font-size: 0.68rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

#dashboard-root .integration-badge.ready {
  border-color: rgba(36, 197, 140, 0.62);
  color: #85efc2;
}

#dashboard-root .integration-badge.blocked {
  border-color: rgba(255, 106, 115, 0.62);
  color: #ffadb4;
}

#dashboard-root .arg-row {
  display: grid;
  gap: 6px;
  padding: 8px;
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #11151f;
}

#dashboard-root .arg-row.bool {
  grid-template-columns: auto minmax(0, 1fr);
  align-items: center;
}

#dashboard-root .arg-row label {
  margin: 0;
}

#dashboard-root .arg-row.bool input[type="checkbox"] {
  width: auto;
  margin: 0;
}

/* Co-work view */

#dashboard-root .cowork-panel {
  padding: 0;
  overflow: hidden;
}

#dashboard-root .cowork-panel > h2,
#dashboard-root .cowork-panel > .summary,
#dashboard-root .cowork-toolbar {
  padding: 12px 12px 0;
}

#dashboard-root .cowork-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

#dashboard-root .cowork-toolbar-hint {
  color: var(--text-dim);
  font-size: 0.68rem;
  letter-spacing: 0.03em;
}

#dashboard-root .cowork-grid {
  display: grid;
  gap: 10px;
  grid-template-columns: 260px minmax(0, 1fr);
  padding: 12px;
  min-height: 0;
}

#dashboard-root .cowork-grid > .cowork-lane {
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-sm);
  background: #12141a;
  padding: 10px;
  display: grid;
  gap: 8px;
  min-height: 0;
}

#dashboard-root .cowork-grid > .cowork-lane:nth-child(3) {
  display: none;
}

#dashboard-root .cowork-panel.cowork-advanced-visible .cowork-grid {
  grid-template-columns: 240px minmax(0, 1fr) 320px;
}

#dashboard-root .cowork-panel.cowork-advanced-visible .cowork-grid > .cowork-lane:nth-child(3) {
  display: grid;
}

#dashboard-root .cowork-new-chat-btn {
  background: #1185cf;
  border-color: #1185cf;
  color: #ffffff;
}

#dashboard-root #cowork-conversations,
#dashboard-root #cowork-chat-log,
#dashboard-root #cowork-task-board {
  min-height: 0;
  overflow: auto;
}

#dashboard-root #cowork-chat-log {
  max-height: 340px;
  display: grid;
  gap: 8px;
}

#dashboard-root .cowork-msg {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #10131a;
  padding: 8px;
  font-size: 0.76rem;
  color: #dbe5fc;
  display: grid;
  gap: 4px;
}

#dashboard-root .cowork-msg strong {
  color: #ffffff;
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

#dashboard-root .cowork-msg .msg-meta {
  color: var(--text-dim);
  font-size: 0.66rem;
}

#dashboard-root .msg-user {
  border-color: rgba(22, 152, 234, 0.34);
  background: rgba(22, 152, 234, 0.08);
}

#dashboard-root .cowork-shell-banner,
#dashboard-root #cowork-watch-meta {
  border: 1px dashed var(--line-strong);
  border-radius: 8px;
  padding: 8px;
  color: var(--text-muted);
  font-size: 0.72rem;
}

.cowork-watch-meta {
  border: 1px dashed var(--line-strong);
  border-radius: 8px;
  padding: 8px;
}

.cowork-chat-log {
  display: grid;
  gap: 8px;
}

#dashboard-root .cowork-command-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

#dashboard-root .cowork-command-btn {
  border-radius: 999px;
}

.cowork-mode-row {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.cowork-mode-row span {
  font-size: 0.66rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-dim);
}

.cowork-mode-btn {
  border-radius: 999px;
  padding: 4px 10px;
}

.cowork-mode-btn.active {
  border-color: rgba(22, 152, 234, 0.66);
  background: rgba(22, 152, 234, 0.18);
  color: #f0f6ff;
}

.cowork-quick-grid {
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
}

#dashboard-root .cowork-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 7px;
}

#dashboard-root .cowork-metric {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #10131a;
  padding: 8px;
  display: grid;
  gap: 4px;
}

#dashboard-root .cowork-metric small {
  color: var(--text-dim);
  font-size: 0.65rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

#dashboard-root .cowork-metric strong {
  font-size: 0.85rem;
}

#dashboard-root .cowork-task-board {
  display: grid;
  gap: 8px;
}

#dashboard-root .cowork-task-card {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #10131a;
  padding: 8px;
  display: grid;
  gap: 6px;
}

#dashboard-root .cowork-task-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
}

#dashboard-root .cowork-task-status {
  border-radius: 999px;
  font-size: 0.64rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 2px 8px;
  border: 1px solid var(--line-subtle);
}

#dashboard-root .cowork-task-status.status-running {
  border-color: rgba(36, 197, 140, 0.58);
  color: #83f2c6;
}

#dashboard-root .cowork-task-status.status-failed,
#dashboard-root .cowork-task-status.status-error {
  border-color: rgba(255, 106, 115, 0.68);
  color: #ff9fa6;
}

#dashboard-root .cowork-task-status.status-queued,
#dashboard-root .cowork-task-status.status-pending {
  border-color: rgba(255, 178, 76, 0.6);
  color: #ffd18e;
}

#dashboard-root .cowork-task-prompt {
  font-size: 0.74rem;
  color: var(--text-muted);
}

#dashboard-root .cowork-task-actions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

#dashboard-root .cowork-live-frame {
  width: 100%;
  min-height: 300px;
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #090a0f;
}

#dashboard-root .cowork-advanced-panel {
  display: none;
}

#dashboard-root .cowork-panel.cowork-advanced-visible .cowork-advanced-panel {
  display: grid;
}

#dashboard-root.ide-cowork-focus .cowork-grid > .cowork-lane:nth-child(1),
#dashboard-root.ide-cowork-focus .cowork-advanced-panel {
  display: none;
}

#dashboard-root.ide-cowork-focus .cowork-grid {
  grid-template-columns: minmax(0, 1fr);
}

#dashboard-root.ide-cowork-focus .cowork-live-frame {
  min-height: 420px;
}

/* Memory/utility */

#dashboard-root .context-inbox-list {
  display: grid;
  gap: 8px;
  max-height: 320px;
  overflow: auto;
}

#dashboard-root .context-inbox-item {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #10131a;
  padding: 8px;
  display: grid;
  gap: 5px;
}

#dashboard-root .context-inbox-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

#dashboard-root .context-inbox-text {
  color: #d7e2ff;
  font-size: 0.75rem;
  line-height: 1.4;
}

#dashboard-root .context-inbox-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

#dashboard-root .context-tag {
  border: 1px solid var(--line-subtle);
  border-radius: 999px;
  background: #101a2a;
  color: #9fc7ff;
  padding: 2px 8px;
  font-size: 0.66rem;
}

#dashboard-root .context-tag-editor {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: 6px;
  align-items: center;
}

#dashboard-root .context-inbox-actions,
#dashboard-root .context-inbox-meta-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

#dashboard-root .utility-transform-grid {
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
}

#dashboard-root #context-feedback-line,
#dashboard-root #context-mode-hint,
#dashboard-root #pplx-next-step,
#dashboard-root #pplx-capability-health,
#dashboard-root #pplx-action-feedback {
  font-size: 0.7rem;
}

#dashboard-root [data-tone="good"] {
  color: #9ff7ce;
}

#dashboard-root [data-tone="warn"] {
  color: #ffd19a;
}

#dashboard-root [data-tone="error"] {
  color: #ffacb3;
}

/* Right rail */

#dashboard-root .utility-rail-head h2 {
  color: var(--text-main);
  font-size: 0.9rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

#dashboard-root .ide-inspector-module h3 {
  color: var(--text-muted);
  font-size: 0.72rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

#dashboard-root .ide-inspector-module pre {
  border: 0;
  background: transparent;
  padding: 0;
  color: #d1dbf2;
  min-height: 0;
}

#dashboard-root #dashboard-utility-rail.collapsed,
#dashboard-root .utility-rail.collapsed {
  display: none;
}

/* Bottom output drawer */

#dashboard-root #ide-bottom-rail {
  grid-row: 4;
  border-top: 1px solid var(--line-subtle);
  background: var(--bg-bottom);
  padding: 10px 12px;
  max-height: 240px;
  overflow: auto;
}

.ide-bottom-rail {
  border-top: 1px solid var(--line-subtle);
}

#dashboard-root .ide-bottom-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

#dashboard-root .ide-bottom-module {
  min-height: 0;
}

#dashboard-root .ide-bottom-module pre {
  max-height: 160px;
}

/* Collapse states */

#dashboard-root.ide-left-collapsed .ide-workspace {
  grid-template-columns: 0 minmax(0, 1fr) 330px;
}

#dashboard-root.ide-left-collapsed #ide-left-dock {
  padding: 0;
  border-right: 0;
  overflow: hidden;
}

#dashboard-root.ide-right-collapsed .ide-workspace {
  grid-template-columns: 300px minmax(0, 1fr) 0;
}

#dashboard-root.ide-right-collapsed #dashboard-utility-rail {
  padding: 0;
  border-left: 0;
  overflow: hidden;
}

#dashboard-root.ide-bottom-collapsed #ide-bottom-rail {
  display: none;
}

/* Dynamic dashboard card states */

#dashboard-root .dashboard-panel-card {
  transition: border-color 140ms ease, box-shadow 140ms ease;
}

#dashboard-root .dashboard-panel-focus {
  border-color: rgba(22, 152, 234, 0.7);
  box-shadow: 0 0 0 2px rgba(22, 152, 234, 0.18);
}

#dashboard-root .panel-dragging {
  opacity: 0.7;
}

/* Modal system */

.dashboard-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(6, 7, 11, 0.72);
  backdrop-filter: blur(4px);
  display: grid;
  place-items: center;
  z-index: 240;
  padding: 18px;
}

.context-picker-overlay,
.desktop-command-palette-overlay,
.live-viewer-modal-overlay,
.approval-action-modal-overlay {
  z-index: 260;
}

.dashboard-modal-overlay.hidden {
  display: none;
}

.dashboard-modal-card {
  width: min(940px, 100%);
  max-height: min(90vh, 860px);
  overflow: auto;
  border: 1px solid var(--line-strong);
  border-radius: var(--radius-md);
  background: #10131b;
  box-shadow: var(--shadow-soft);
  display: grid;
  gap: 10px;
  padding: 14px;
}

.context-picker-card {
  width: min(960px, 100%);
}

.dashboard-modal-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  border-bottom: 1px solid var(--line-subtle);
  padding-bottom: 8px;
}

.live-viewer-modal-card {
  width: min(1400px, 100%);
  height: min(92vh, 900px);
}

.live-viewer-iframe {
  width: 100%;
  height: 100%;
  min-height: 70vh;
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #090a0f;
}

.approval-action-modal-card {
  width: min(860px, 100%);
}

.approval-modal-meta-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 8px;
}

.approval-modal-meta-item {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #121622;
  padding: 8px;
  display: grid;
  gap: 4px;
}

.approval-modal-auto-toggle {
  text-transform: none;
  letter-spacing: 0.01em;
  font-size: 0.8rem;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

.approval-modal-auto-toggle input[type="checkbox"] {
  width: auto;
}

.context-picker-actions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 8px;
}

/* Desktop command palette */

.desktop-command-palette-card {
  width: min(720px, 100%);
}

.desktop-command-hint {
  color: var(--text-dim);
  font-size: 0.72rem;
}

.desktop-command-list {
  display: grid;
  gap: 6px;
}

.desktop-command-item {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #121521;
  padding: 8px;
  display: grid;
  gap: 4px;
  cursor: pointer;
}

.desktop-command-main {
  display: grid;
  gap: 4px;
}

.desktop-command-label {
  font-size: 0.8rem;
  color: #f0f6ff;
}

.desktop-command-meta {
  font-size: 0.68rem;
  color: var(--text-dim);
}

.desktop-command-key {
  font-size: 0.68rem;
  color: #9ec6ff;
  border: 1px solid var(--line-subtle);
  border-radius: 6px;
  padding: 2px 6px;
  justify-self: start;
  background: #111827;
}

.desktop-command-item.active,
.desktop-command-item:hover {
  border-color: rgba(22, 152, 234, 0.58);
  background: rgba(22, 152, 234, 0.12);
}

.desktop-command-item-title {
  font-size: 0.8rem;
  color: #edf4ff;
}

.desktop-command-item-meta {
  font-size: 0.68rem;
  color: var(--text-dim);
}

/* Dev workbench */

.tw-dev-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 10px;
}

.panel-dev-workbench {
  border-color: rgba(22, 152, 234, 0.42);
}

.tw-dev-card {
  border: 1px solid var(--line-subtle);
  border-radius: var(--radius-sm);
  background: #11141d;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.tw-dev-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.tw-btn-small {
  font-size: 0.66rem;
  padding: 5px 9px;
}

/* Dynamic dashboard/workbench classes */

.dashboard-workbench {
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  gap: 10px;
  min-height: 0;
}

.dashboard-workbench-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
}

.dashboard-tab-group {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.dashboard-workbench-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.dashboard-panel-grid {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fill, minmax(var(--dashboard-panel-min-width, 320px), 1fr));
  align-content: start;
}

.dashboard-tool-list {
  display: grid;
  gap: 8px;
}

.dashboard-tool-item {
  text-align: left;
}

.panel-drag-handle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--line-subtle);
  margin-bottom: 8px;
}

.panel-drag-grip {
  color: var(--text-dim);
}

.panel-drag-label {
  flex: 1;
  min-width: 0;
  color: #eff5ff;
  font-size: 0.76rem;
}

.panel-drag-tag {
  color: var(--text-dim);
  font-size: 0.66rem;
}

.panel-handle-actions {
  display: flex;
  gap: 6px;
}

.panel-size-toggle,
.panel-remove-btn {
  font-size: 0.66rem;
  padding: 4px 8px;
}

.custom-panel-config {
  display: grid;
  gap: 8px;
}

.custom-user-panel {
  border-color: rgba(22, 152, 234, 0.34);
  background:
    linear-gradient(180deg, rgba(18, 22, 33, 0.98), rgba(15, 18, 28, 0.98)),
    radial-gradient(420px 180px at 0% 0%, rgba(22, 152, 234, 0.11), transparent 72%);
}

.custom-panel-title-input,
.custom-panel-page-select,
.custom-panel-segment-select,
.custom-panel-notes {
  background: #0f1420;
  border-color: #2b3347;
}

.custom-panel-notes {
  min-height: 130px;
  font-family: var(--font-mono);
  font-size: 0.74rem;
}

.generated-dashboard-panel {
  border-style: dashed;
}

.generated-panel-list {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 4px;
  color: #d0dcf9;
  font-size: 0.74rem;
}

.dashboard-workspace-body {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 10px;
  min-height: 0;
}

.dashboard-tab {
  border: 1px solid var(--line-subtle);
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 0.67rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  background: #111826;
  color: var(--text-muted);
}

.dashboard-tab:hover {
  border-color: rgba(22, 152, 234, 0.58);
  color: #e6f0ff;
}

.dashboard-tab.active {
  border-color: rgba(22, 152, 234, 0.72);
  background: rgba(22, 152, 234, 0.15);
  color: #f0f6ff;
}

.dashboard-root-workbench .ide-workspace {
  background:
    radial-gradient(840px 320px at 20% -10%, rgba(22, 152, 234, 0.08), transparent 70%),
    linear-gradient(180deg, #11141c, #0f1219);
}

.blueprint-shell-root .ide-workspace {
  background:
    radial-gradient(1000px 420px at 12% -18%, rgba(22, 152, 234, 0.1), transparent 72%),
    linear-gradient(180deg, #10131b, #0f1218);
}

.pplx-shell {
  display: grid;
  grid-template-columns: 250px minmax(0, 1fr);
  gap: 10px;
  min-height: 0;
}

/* Visual polish for production feel */

#dashboard-root * {
  scrollbar-width: thin;
  scrollbar-color: #2c344a #11141c;
}

#dashboard-root *::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

#dashboard-root *::-webkit-scrollbar-track {
  background: #11141c;
}

#dashboard-root *::-webkit-scrollbar-thumb {
  background: #2c344a;
  border-radius: 999px;
  border: 2px solid #11141c;
}

#dashboard-root .panel,
#dashboard-root .sub-panel,
#dashboard-root .ide-inspector-module,
#dashboard-root .ide-bottom-module,
#dashboard-root .cowork-task-card,
#dashboard-root .context-inbox-item,
#dashboard-root .history-item,
#dashboard-root .desktop-command-item,
#dashboard-root .tw-dev-card {
  transition:
    border-color 140ms ease,
    box-shadow 160ms ease,
    transform 160ms ease,
    background-color 160ms ease;
}

#dashboard-root .panel:hover,
#dashboard-root .sub-panel:hover,
#dashboard-root .ide-inspector-module:hover,
#dashboard-root .ide-bottom-module:hover,
#dashboard-root .cowork-task-card:hover,
#dashboard-root .context-inbox-item:hover,
#dashboard-root .history-item:hover,
#dashboard-root .desktop-command-item:hover,
#dashboard-root .tw-dev-card:hover {
  border-color: #32405c;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.26);
}

#dashboard-root .ide-activity-btn,
#dashboard-root button,
#dashboard-root .ide-tab,
#dashboard-root .dashboard-tab {
  transition:
    color 120ms ease,
    border-color 140ms ease,
    background-color 140ms ease,
    transform 120ms ease;
}

#dashboard-root button:active,
#dashboard-root .ide-activity-btn:active,
#dashboard-root .ide-tab:active,
#dashboard-root .dashboard-tab:active {
  transform: translateY(1px);
}

#dashboard-root .ide-view-header,
#dashboard-root .ide-topbar,
#dashboard-root #ide-activity-rail,
#dashboard-root #dashboard-utility-rail,
#dashboard-root #ide-bottom-rail {
  backdrop-filter: blur(8px);
}

/* Blueprint helper classes still used by app */

.pplx-notification-feed {
  display: grid;
  gap: 8px;
}

.pplx-thread-item {
  border: 1px solid var(--line-subtle);
  border-radius: 8px;
  background: #111521;
  color: var(--text-muted);
  text-align: left;
}

.pplx-thread-item:hover {
  color: var(--text-main);
}

.pplx-thread-empty {
  color: var(--text-dim);
  font-size: 0.76rem;
}

/* Responsive */

@media (max-width: 1500px) {
  #dashboard-root .ide-workspace {
    grid-template-columns: 270px minmax(0, 1fr) 300px;
  }

  #dashboard-root.ide-left-collapsed .ide-workspace {
    grid-template-columns: 0 minmax(0, 1fr) 300px;
  }

  #dashboard-root.ide-right-collapsed .ide-workspace {
    grid-template-columns: 270px minmax(0, 1fr) 0;
  }

  #dashboard-root .cowork-grid {
    grid-template-columns: 220px minmax(0, 1fr);
  }

  #dashboard-root .cowork-panel.cowork-advanced-visible .cowork-grid {
    grid-template-columns: 210px minmax(0, 1fr) 290px;
  }
}

@media (max-width: 1280px) {
  #dashboard-root.ide-shell {
    min-width: 0;
  }

  #dashboard-root .ide-topbar-right .ide-pill-cost,
  #dashboard-root .ide-topbar-right .ide-pill-running,
  #dashboard-root .ide-topbar-right #ide-top-onboarding {
    display: none;
  }

  #dashboard-root .ide-workspace {
    grid-template-columns: 0 minmax(0, 1fr) 300px;
  }

  #dashboard-root #ide-left-dock {
    padding: 0;
    border-right: 0;
    overflow: hidden;
  }

  #dashboard-root.ide-left-collapsed .ide-workspace {
    grid-template-columns: 0 minmax(0, 1fr) 300px;
  }

  #dashboard-root.ide-right-collapsed .ide-workspace {
    grid-template-columns: 0 minmax(0, 1fr) 0;
  }

  #dashboard-root .cowork-grid {
    grid-template-columns: minmax(0, 1fr);
  }

  #dashboard-root .cowork-live-frame {
    min-height: 260px;
  }

  #dashboard-root .ide-bottom-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 980px) {
  main.app-shell,
  main.shell {
    grid-template-rows: auto minmax(0, 1fr);
  }

  .hero {
    grid-template-columns: 1fr;
    justify-items: start;
  }

  #dashboard-root.ide-shell {
    grid-template-rows: auto auto minmax(0, 1fr) auto;
  }

  #dashboard-root .ide-topbar {
    flex-wrap: wrap;
    align-content: center;
    padding: 8px;
    height: auto;
  }

  #dashboard-root #ide-activity-rail {
    padding: 0 8px;
  }

  #dashboard-root .ide-workspace {
    grid-template-columns: minmax(0, 1fr);
  }

  #dashboard-root #dashboard-utility-rail {
    display: none;
  }

  #dashboard-root.ide-right-collapsed .ide-workspace,
  #dashboard-root.ide-left-collapsed .ide-workspace {
    grid-template-columns: minmax(0, 1fr);
  }
}

/* UI polish pass 2: spacing rhythm, contrast, and deterministic layering */

:root {
  --ui-space-1: 6px;
  --ui-space-2: 8px;
  --ui-space-3: 10px;
  --ui-space-4: 12px;
  --ui-space-5: 14px;
  --ui-space-6: 16px;
  --ui-panel-padding: 12px;
  --ui-border-strong: #343b4f;
  --ui-surface-strong: #161b26;
  --ui-surface-soft: #121722;
  --ui-text-soft: #c0c8db;
  --ui-text-faint: #97a0b5;
}

#dashboard-root .ide-topbar,
#dashboard-root #ide-activity-rail,
#dashboard-root #ide-left-dock,
#dashboard-root .ide-editor-surface,
#dashboard-root #dashboard-utility-rail,
#dashboard-root #ide-bottom-rail {
  position: relative;
}

#dashboard-root .ide-topbar {
  z-index: 34;
  gap: var(--ui-space-3);
  padding-inline: var(--ui-space-6);
}

#dashboard-root #ide-activity-rail {
  z-index: 30;
  padding-inline: var(--ui-space-6);
}

#dashboard-root #ide-left-dock,
#dashboard-root .ide-editor-surface,
#dashboard-root #dashboard-utility-rail {
  z-index: 18;
}

#dashboard-root #ide-bottom-rail {
  z-index: 20;
}

#dashboard-root #ide-main-dock,
#dashboard-root #ide-left-dock,
#dashboard-root #dashboard-utility-rail {
  padding: var(--ui-space-4);
}

#dashboard-root .ide-view-header {
  padding: var(--ui-space-4) var(--ui-space-5);
}

#dashboard-root .panel,
#dashboard-root .sub-panel,
#dashboard-root .ide-inspector-module,
#dashboard-root .ide-bottom-module,
#dashboard-root .cowork-grid > .cowork-lane,
#dashboard-root .context-inbox-item,
#dashboard-root .cowork-task-card,
#dashboard-root .desktop-command-item,
#dashboard-root .tw-dev-card {
  padding: var(--ui-panel-padding);
  border-color: var(--ui-border-strong);
}

#dashboard-root .panel {
  background: linear-gradient(180deg, #181d28, #141923);
}

#dashboard-root .panel.split > section {
  padding: var(--ui-panel-padding);
  border-color: var(--ui-border-strong);
  background: var(--ui-surface-soft);
}

#dashboard-root .sub-panel,
#dashboard-root .ide-inspector-module,
#dashboard-root .ide-bottom-module,
#dashboard-root .cowork-grid > .cowork-lane,
#dashboard-root .context-inbox-item,
#dashboard-root .cowork-task-card,
#dashboard-root .desktop-command-item,
#dashboard-root .tw-dev-card {
  background: var(--ui-surface-strong);
}

#dashboard-root .panel > h2 + .summary,
#dashboard-root .panel > h3 + .summary {
  margin-top: -2px;
}

#dashboard-root .summary,
#dashboard-root .cowork-task-prompt,
#dashboard-root .context-inbox-text,
#dashboard-root .desktop-command-meta,
#dashboard-root .cowork-msg .msg-meta,
#dashboard-root .pplx-thread-empty {
  color: var(--ui-text-soft);
}

#dashboard-root label,
#dashboard-root .hero-note,
#dashboard-root .desktop-command-item-meta,
#dashboard-root .integration-badge,
#dashboard-root .context-tag,
#dashboard-root #ide-view-subtitle {
  color: var(--ui-text-faint);
}

#dashboard-root input,
#dashboard-root textarea,
#dashboard-root select {
  background: #0f1420;
  border-color: var(--ui-border-strong);
  color: #edf2ff;
}

#dashboard-root input::placeholder,
#dashboard-root textarea::placeholder {
  color: #909aae;
}

#dashboard-root pre {
  background: #0f1420;
  border-color: var(--ui-border-strong);
  color: #d5def4;
}

#dashboard-root button.ghost {
  border-color: var(--ui-border-strong);
  color: #c6d0e6;
  background: #141a27;
}

#dashboard-root button.ghost:hover {
  border-color: rgba(22, 152, 234, 0.65);
  background: #192133;
  color: #edf3ff;
}

#dashboard-root .ide-pill,
#dashboard-root .chip {
  border-color: var(--ui-border-strong);
  color: #b8c3da;
  background: #161d2c;
}

#dashboard-root .ide-activity-btn {
  padding-block: 10px;
}

.desktop-drag-region {
  z-index: 320;
}

#onboarding-root {
  position: relative;
  z-index: 60;
}

.dashboard-modal-overlay {
  z-index: 1000;
}

.context-picker-overlay {
  z-index: 1040;
}

.desktop-command-palette-overlay {
  z-index: 1060;
}

.live-viewer-modal-overlay {
  z-index: 1080;
}

.approval-action-modal-overlay {
  z-index: 1100;
}

@media (max-width: 1280px) {
  #dashboard-root .ide-topbar {
    padding-inline: var(--ui-space-4);
  }

  #dashboard-root #ide-activity-rail {
    padding-inline: var(--ui-space-4);
  }

  #dashboard-root .cowork-grid {
    gap: var(--ui-space-4);
    padding: var(--ui-space-4);
  }
}
